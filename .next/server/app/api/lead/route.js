"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/lead/route";
exports.ids = ["app/api/lead/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flead%2Froute&page=%2Fapi%2Flead%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flead%2Froute.ts&appDir=E%3A%5CPulse%5Cpulse-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPulse%5Cpulse-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flead%2Froute&page=%2Fapi%2Flead%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flead%2Froute.ts&appDir=E%3A%5CPulse%5Cpulse-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPulse%5Cpulse-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var E_Pulse_pulse_site_app_api_lead_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/lead/route.ts */ \"(rsc)/./app/api/lead/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/lead/route\",\n        pathname: \"/api/lead\",\n        filename: \"route\",\n        bundlePath: \"app/api/lead/route\"\n    },\n    resolvedPagePath: \"E:\\\\Pulse\\\\pulse-site\\\\app\\\\api\\\\lead\\\\route.ts\",\n    nextConfigOutput,\n    userland: E_Pulse_pulse_site_app_api_lead_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/lead/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZsZWFkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZsZWFkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbGVhZCUyRnJvdXRlLnRzJmFwcERpcj1FJTNBJTVDUHVsc2UlNUNwdWxzZS1zaXRlJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1FJTNBJTVDUHVsc2UlNUNwdWxzZS1zaXRlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNEO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVsc2Utc2l0ZS8/MjFiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJFOlxcXFxQdWxzZVxcXFxwdWxzZS1zaXRlXFxcXGFwcFxcXFxhcGlcXFxcbGVhZFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbGVhZC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2xlYWRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2xlYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJFOlxcXFxQdWxzZVxcXFxwdWxzZS1zaXRlXFxcXGFwcFxcXFxhcGlcXFxcbGVhZFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbGVhZC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flead%2Froute&page=%2Fapi%2Flead%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flead%2Froute.ts&appDir=E%3A%5CPulse%5Cpulse-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPulse%5Cpulse-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/lead/route.ts":
/*!*******************************!*\
  !*** ./app/api/lead/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_lead_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/lead-schema */ \"(rsc)/./lib/lead-schema.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _lib_sanitize__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/sanitize */ \"(rsc)/./lib/sanitize.ts\");\n/* harmony import */ var _lib_rate_limit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/rate-limit */ \"(rsc)/./lib/rate-limit.ts\");\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst getClientIp = (request)=>{\n    const forwarded = request.headers.get(\"x-forwarded-for\");\n    if (!forwarded) return \"\";\n    return forwarded.split(\",\")[0]?.trim() ?? \"\";\n};\nconst normalizeTelegram = (value)=>{\n    const trimmed = value.trim();\n    if (!trimmed) return trimmed;\n    return trimmed.startsWith(\"@\") ? trimmed : `@${trimmed}`;\n};\nasync function POST(request) {\n    const ip = getClientIp(request);\n    const rate = await (0,_lib_rate_limit__WEBPACK_IMPORTED_MODULE_4__.rateLimit)(ip, 5, 10 * 60);\n    if (!rate.success) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Слишком много запросов. Попробуйте позже.\"\n        }, {\n            status: 429\n        });\n    }\n    const body = await request.json().catch(()=>null);\n    if (!body) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Некорректные данные.\"\n        }, {\n            status: 400\n        });\n    }\n    const parsed = _lib_lead_schema__WEBPACK_IMPORTED_MODULE_1__.leadSchema.safeParse(body);\n    if (!parsed.success) {\n        const errors = {};\n        parsed.error.issues.forEach((issue)=>{\n            const field = issue.path[0];\n            if (field && !errors[field]) {\n                errors[field] = issue.message;\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Проверьте поля формы.\",\n            errors\n        }, {\n            status: 422\n        });\n    }\n    if (parsed.data.company) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    }\n    const name = (0,_lib_sanitize__WEBPACK_IMPORTED_MODULE_3__.sanitizeText)(parsed.data.name);\n    const telegram = (0,_lib_sanitize__WEBPACK_IMPORTED_MODULE_3__.sanitizeText)(normalizeTelegram(parsed.data.telegram));\n    const contact = (0,_lib_sanitize__WEBPACK_IMPORTED_MODULE_3__.sanitizeText)(parsed.data.contact);\n    const message = parsed.data.message ? (0,_lib_sanitize__WEBPACK_IMPORTED_MODULE_3__.sanitizeText)(parsed.data.message) : undefined;\n    const clientsCount = parsed.data.clientsCount;\n    const userAgent = request.headers.get(\"user-agent\") ?? undefined;\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.lead.create({\n        data: {\n            name,\n            telegram,\n            contact,\n            clientsCount,\n            message,\n            userAgent,\n            ip: ip || undefined\n        }\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2xlYWQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyQztBQUNJO0FBQ1Q7QUFDUTtBQUNEO0FBRXRDLE1BQU1LLFVBQVUsU0FBUztBQUVoQyxNQUFNQyxjQUFjLENBQUNDO0lBQ25CLE1BQU1DLFlBQVlELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3RDLElBQUksQ0FBQ0YsV0FBVyxPQUFPO0lBQ3ZCLE9BQU9BLFVBQVVHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFQyxVQUFVO0FBQzVDO0FBRUEsTUFBTUMsb0JBQW9CLENBQUNDO0lBQ3pCLE1BQU1DLFVBQVVELE1BQU1GLElBQUk7SUFDMUIsSUFBSSxDQUFDRyxTQUFTLE9BQU9BO0lBQ3JCLE9BQU9BLFFBQVFDLFVBQVUsQ0FBQyxPQUFPRCxVQUFVLENBQUMsQ0FBQyxFQUFFQSxRQUFRLENBQUM7QUFDMUQ7QUFFTyxlQUFlRSxLQUFLVixPQUFnQjtJQUN6QyxNQUFNVyxLQUFLWixZQUFZQztJQUN2QixNQUFNWSxPQUFPLE1BQU1mLDBEQUFTQSxDQUFDYyxJQUFJLEdBQUcsS0FBSztJQUV6QyxJQUFJLENBQUNDLEtBQUtDLE9BQU8sRUFBRTtRQUNqQixPQUFPcEIscURBQVlBLENBQUNxQixJQUFJLENBQ3RCO1lBQUVELFNBQVM7WUFBT0UsU0FBUztRQUE0QyxHQUN2RTtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7SUFFQSxNQUFNQyxPQUFPLE1BQU1qQixRQUFRYyxJQUFJLEdBQUdJLEtBQUssQ0FBQyxJQUFNO0lBQzlDLElBQUksQ0FBQ0QsTUFBTTtRQUNULE9BQU94QixxREFBWUEsQ0FBQ3FCLElBQUksQ0FDdEI7WUFBRUQsU0FBUztZQUFPRSxTQUFTO1FBQXVCLEdBQ2xEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtJQUVBLE1BQU1HLFNBQVN6Qix3REFBVUEsQ0FBQzBCLFNBQVMsQ0FBQ0g7SUFDcEMsSUFBSSxDQUFDRSxPQUFPTixPQUFPLEVBQUU7UUFDbkIsTUFBTVEsU0FBaUMsQ0FBQztRQUN4Q0YsT0FBT0csS0FBSyxDQUFDQyxNQUFNLENBQUNDLE9BQU8sQ0FBQyxDQUFDQztZQUMzQixNQUFNQyxRQUFRRCxNQUFNRSxJQUFJLENBQUMsRUFBRTtZQUMzQixJQUFJRCxTQUFTLENBQUNMLE1BQU0sQ0FBQ0ssTUFBZ0IsRUFBRTtnQkFDckNMLE1BQU0sQ0FBQ0ssTUFBZ0IsR0FBR0QsTUFBTVYsT0FBTztZQUN6QztRQUNGO1FBRUEsT0FBT3RCLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUN0QjtZQUFFRCxTQUFTO1lBQU9FLFNBQVM7WUFBeUJNO1FBQU8sR0FDM0Q7WUFBRUwsUUFBUTtRQUFJO0lBRWxCO0lBRUEsSUFBSUcsT0FBT1MsSUFBSSxDQUFDQyxPQUFPLEVBQUU7UUFDdkIsT0FBT3BDLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUFDO1lBQUVELFNBQVM7UUFBSztJQUMzQztJQUVBLE1BQU1pQixPQUFPbEMsMkRBQVlBLENBQUN1QixPQUFPUyxJQUFJLENBQUNFLElBQUk7SUFDMUMsTUFBTUMsV0FBV25DLDJEQUFZQSxDQUFDVSxrQkFBa0JhLE9BQU9TLElBQUksQ0FBQ0csUUFBUTtJQUNwRSxNQUFNQyxVQUFVcEMsMkRBQVlBLENBQUN1QixPQUFPUyxJQUFJLENBQUNJLE9BQU87SUFDaEQsTUFBTWpCLFVBQVVJLE9BQU9TLElBQUksQ0FBQ2IsT0FBTyxHQUFHbkIsMkRBQVlBLENBQUN1QixPQUFPUyxJQUFJLENBQUNiLE9BQU8sSUFBSWtCO0lBQzFFLE1BQU1DLGVBQWVmLE9BQU9TLElBQUksQ0FBQ00sWUFBWTtJQUM3QyxNQUFNQyxZQUFZbkMsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCOEI7SUFFdkQsTUFBTXRDLCtDQUFNQSxDQUFDeUMsSUFBSSxDQUFDQyxNQUFNLENBQUM7UUFDdkJULE1BQU07WUFDSkU7WUFDQUM7WUFDQUM7WUFDQUU7WUFDQW5CO1lBQ0FvQjtZQUNBeEIsSUFBSUEsTUFBTXNCO1FBQ1o7SUFDRjtJQUVBLE9BQU94QyxxREFBWUEsQ0FBQ3FCLElBQUksQ0FBQztRQUFFRCxTQUFTO0lBQUs7QUFDM0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdWxzZS1zaXRlLy4vYXBwL2FwaS9sZWFkL3JvdXRlLnRzP2Q0ZjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBsZWFkU2NoZW1hIH0gZnJvbSBcIkAvbGliL2xlYWQtc2NoZW1hXCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5pbXBvcnQgeyBzYW5pdGl6ZVRleHQgfSBmcm9tIFwiQC9saWIvc2FuaXRpemVcIjtcbmltcG9ydCB7IHJhdGVMaW1pdCB9IGZyb20gXCJAL2xpYi9yYXRlLWxpbWl0XCI7XG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gXCJub2RlanNcIjtcblxuY29uc3QgZ2V0Q2xpZW50SXAgPSAocmVxdWVzdDogUmVxdWVzdCkgPT4ge1xuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtZm9yXCIpO1xuICBpZiAoIWZvcndhcmRlZCkgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBmb3J3YXJkZWQuc3BsaXQoXCIsXCIpWzBdPy50cmltKCkgPz8gXCJcIjtcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZVRlbGVncmFtID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcbiAgaWYgKCF0cmltbWVkKSByZXR1cm4gdHJpbW1lZDtcbiAgcmV0dXJuIHRyaW1tZWQuc3RhcnRzV2l0aChcIkBcIikgPyB0cmltbWVkIDogYEAke3RyaW1tZWR9YDtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3QgaXAgPSBnZXRDbGllbnRJcChyZXF1ZXN0KTtcbiAgY29uc3QgcmF0ZSA9IGF3YWl0IHJhdGVMaW1pdChpcCwgNSwgMTAgKiA2MCk7XG5cbiAgaWYgKCFyYXRlLnN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcItCh0LvQuNGI0LrQvtC8INC80L3QvtCz0L4g0LfQsNC/0YDQvtGB0L7Qsi4g0J/QvtC/0YDQvtCx0YPQudGC0LUg0L/QvtC30LbQtS5cIiB9LFxuICAgICAgeyBzdGF0dXM6IDQyOSB9XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgaWYgKCFib2R5KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCLQndC10LrQvtGA0YDQtdC60YLQvdGL0LUg0LTQsNC90L3Ri9C1LlwiIH0sXG4gICAgICB7IHN0YXR1czogNDAwIH1cbiAgICApO1xuICB9XG5cbiAgY29uc3QgcGFyc2VkID0gbGVhZFNjaGVtYS5zYWZlUGFyc2UoYm9keSk7XG4gIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICBjb25zdCBlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICBwYXJzZWQuZXJyb3IuaXNzdWVzLmZvckVhY2goKGlzc3VlKSA9PiB7XG4gICAgICBjb25zdCBmaWVsZCA9IGlzc3VlLnBhdGhbMF07XG4gICAgICBpZiAoZmllbGQgJiYgIWVycm9yc1tmaWVsZCBhcyBzdHJpbmddKSB7XG4gICAgICAgIGVycm9yc1tmaWVsZCBhcyBzdHJpbmddID0gaXNzdWUubWVzc2FnZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwi0J/RgNC+0LLQtdGA0YzRgtC1INC/0L7Qu9GPINGE0L7RgNC80YsuXCIsIGVycm9ycyB9LFxuICAgICAgeyBzdGF0dXM6IDQyMiB9XG4gICAgKTtcbiAgfVxuXG4gIGlmIChwYXJzZWQuZGF0YS5jb21wYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgfVxuXG4gIGNvbnN0IG5hbWUgPSBzYW5pdGl6ZVRleHQocGFyc2VkLmRhdGEubmFtZSk7XG4gIGNvbnN0IHRlbGVncmFtID0gc2FuaXRpemVUZXh0KG5vcm1hbGl6ZVRlbGVncmFtKHBhcnNlZC5kYXRhLnRlbGVncmFtKSk7XG4gIGNvbnN0IGNvbnRhY3QgPSBzYW5pdGl6ZVRleHQocGFyc2VkLmRhdGEuY29udGFjdCk7XG4gIGNvbnN0IG1lc3NhZ2UgPSBwYXJzZWQuZGF0YS5tZXNzYWdlID8gc2FuaXRpemVUZXh0KHBhcnNlZC5kYXRhLm1lc3NhZ2UpIDogdW5kZWZpbmVkO1xuICBjb25zdCBjbGllbnRzQ291bnQgPSBwYXJzZWQuZGF0YS5jbGllbnRzQ291bnQ7XG4gIGNvbnN0IHVzZXJBZ2VudCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ1c2VyLWFnZW50XCIpID8/IHVuZGVmaW5lZDtcblxuICBhd2FpdCBwcmlzbWEubGVhZC5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIG5hbWUsXG4gICAgICB0ZWxlZ3JhbSxcbiAgICAgIGNvbnRhY3QsXG4gICAgICBjbGllbnRzQ291bnQsXG4gICAgICBtZXNzYWdlLFxuICAgICAgdXNlckFnZW50LFxuICAgICAgaXA6IGlwIHx8IHVuZGVmaW5lZFxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibGVhZFNjaGVtYSIsInByaXNtYSIsInNhbml0aXplVGV4dCIsInJhdGVMaW1pdCIsInJ1bnRpbWUiLCJnZXRDbGllbnRJcCIsInJlcXVlc3QiLCJmb3J3YXJkZWQiLCJoZWFkZXJzIiwiZ2V0Iiwic3BsaXQiLCJ0cmltIiwibm9ybWFsaXplVGVsZWdyYW0iLCJ2YWx1ZSIsInRyaW1tZWQiLCJzdGFydHNXaXRoIiwiUE9TVCIsImlwIiwicmF0ZSIsInN1Y2Nlc3MiLCJqc29uIiwibWVzc2FnZSIsInN0YXR1cyIsImJvZHkiLCJjYXRjaCIsInBhcnNlZCIsInNhZmVQYXJzZSIsImVycm9ycyIsImVycm9yIiwiaXNzdWVzIiwiZm9yRWFjaCIsImlzc3VlIiwiZmllbGQiLCJwYXRoIiwiZGF0YSIsImNvbXBhbnkiLCJuYW1lIiwidGVsZWdyYW0iLCJjb250YWN0IiwidW5kZWZpbmVkIiwiY2xpZW50c0NvdW50IiwidXNlckFnZW50IiwibGVhZCIsImNyZWF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/lead/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/lead-schema.ts":
/*!****************************!*\
  !*** ./lib/lead-schema.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   leadSchema: () => (/* binding */ leadSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst telegramRegex = /^@?[a-zA-Z0-9_]{3,}$/;\nconst isValidContact = (value)=>{\n    const emailLike = value.includes(\"@\") && value.includes(\".\");\n    const phoneDigits = value.replace(/\\D/g, \"\");\n    return emailLike || phoneDigits.length >= 7;\n};\nconst leadSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(2, \"Укажите имя\").max(80, \"Слишком длинное имя\"),\n    telegram: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(2, \"Укажите Telegram\").max(50, \"Слишком длинный Telegram\").regex(telegramRegex, \"Неверный Telegram\"),\n    contact: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(5, \"Укажите телефон или email\").max(120, \"Слишком длинный контакт\").refine(isValidContact, \"Укажите телефон или email\"),\n    clientsCount: zod__WEBPACK_IMPORTED_MODULE_0__.preprocess((value)=>{\n        if (value === \"\" || value === null || value === undefined) return undefined;\n        const num = Number(value);\n        return Number.isFinite(num) ? num : value;\n    }, zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(1, \"Минимум 1\").max(1000, \"Слишком много\").optional()),\n    message: zod__WEBPACK_IMPORTED_MODULE_0__.string().max(1000, \"Сообщение слишком длинное\").optional(),\n    agree: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().refine((value)=>value === true, {\n        message: \"Нужно согласие\"\n    }),\n    company: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbGVhZC1zY2hlbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0I7QUFFeEIsTUFBTUMsZ0JBQWdCO0FBRXRCLE1BQU1DLGlCQUFpQixDQUFDQztJQUN0QixNQUFNQyxZQUFZRCxNQUFNRSxRQUFRLENBQUMsUUFBUUYsTUFBTUUsUUFBUSxDQUFDO0lBQ3hELE1BQU1DLGNBQWNILE1BQU1JLE9BQU8sQ0FBQyxPQUFPO0lBQ3pDLE9BQU9ILGFBQWFFLFlBQVlFLE1BQU0sSUFBSTtBQUM1QztBQUVPLE1BQU1DLGFBQWFULHVDQUFRLENBQUM7SUFDakNXLE1BQU1YLHVDQUFRLEdBQUdhLEdBQUcsQ0FBQyxHQUFHLGVBQWVDLEdBQUcsQ0FBQyxJQUFJO0lBQy9DQyxVQUFVZix1Q0FDRCxHQUNOYSxHQUFHLENBQUMsR0FBRyxvQkFDUEMsR0FBRyxDQUFDLElBQUksNEJBQ1JFLEtBQUssQ0FBQ2YsZUFBZTtJQUN4QmdCLFNBQVNqQix1Q0FDQSxHQUNOYSxHQUFHLENBQUMsR0FBRyw2QkFDUEMsR0FBRyxDQUFDLEtBQUssMkJBQ1RJLE1BQU0sQ0FBQ2hCLGdCQUFnQjtJQUMxQmlCLGNBQWNuQiwyQ0FDRCxDQUFDLENBQUNHO1FBQ1gsSUFBSUEsVUFBVSxNQUFNQSxVQUFVLFFBQVFBLFVBQVVrQixXQUFXLE9BQU9BO1FBQ2xFLE1BQU1DLE1BQU1DLE9BQU9wQjtRQUNuQixPQUFPb0IsT0FBT0MsUUFBUSxDQUFDRixPQUFPQSxNQUFNbkI7SUFDdEMsR0FBR0gsdUNBQVEsR0FBRzBCLEdBQUcsR0FBR2IsR0FBRyxDQUFDLEdBQUcsYUFBYUMsR0FBRyxDQUFDLE1BQU0saUJBQWlCYSxRQUFRO0lBQzdFQyxTQUFTNUIsdUNBQVEsR0FBR2MsR0FBRyxDQUFDLE1BQU0sNkJBQTZCYSxRQUFRO0lBQ25FRSxPQUFPN0Isd0NBQVMsR0FBR2tCLE1BQU0sQ0FBQyxDQUFDZixRQUFVQSxVQUFVLE1BQU07UUFDbkR5QixTQUFTO0lBQ1g7SUFDQUcsU0FBUy9CLHVDQUFRLEdBQUcyQixRQUFRO0FBQzlCLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdWxzZS1zaXRlLy4vbGliL2xlYWQtc2NoZW1hLnRzP2Q5ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuY29uc3QgdGVsZWdyYW1SZWdleCA9IC9eQD9bYS16QS1aMC05X117Myx9JC87XG5cbmNvbnN0IGlzVmFsaWRDb250YWN0ID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgZW1haWxMaWtlID0gdmFsdWUuaW5jbHVkZXMoXCJAXCIpICYmIHZhbHVlLmluY2x1ZGVzKFwiLlwiKTtcbiAgY29uc3QgcGhvbmVEaWdpdHMgPSB2YWx1ZS5yZXBsYWNlKC9cXEQvZywgXCJcIik7XG4gIHJldHVybiBlbWFpbExpa2UgfHwgcGhvbmVEaWdpdHMubGVuZ3RoID49IDc7XG59O1xuXG5leHBvcnQgY29uc3QgbGVhZFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMiwgXCLQo9C60LDQttC40YLQtSDQuNC80Y9cIikubWF4KDgwLCBcItCh0LvQuNGI0LrQvtC8INC00LvQuNC90L3QvtC1INC40LzRj1wiKSxcbiAgdGVsZWdyYW06IHpcbiAgICAuc3RyaW5nKClcbiAgICAubWluKDIsIFwi0KPQutCw0LbQuNGC0LUgVGVsZWdyYW1cIilcbiAgICAubWF4KDUwLCBcItCh0LvQuNGI0LrQvtC8INC00LvQuNC90L3Ri9C5IFRlbGVncmFtXCIpXG4gICAgLnJlZ2V4KHRlbGVncmFtUmVnZXgsIFwi0J3QtdCy0LXRgNC90YvQuSBUZWxlZ3JhbVwiKSxcbiAgY29udGFjdDogelxuICAgIC5zdHJpbmcoKVxuICAgIC5taW4oNSwgXCLQo9C60LDQttC40YLQtSDRgtC10LvQtdGE0L7QvSDQuNC70LggZW1haWxcIilcbiAgICAubWF4KDEyMCwgXCLQodC70LjRiNC60L7QvCDQtNC70LjQvdC90YvQuSDQutC+0L3RgtCw0LrRglwiKVxuICAgIC5yZWZpbmUoaXNWYWxpZENvbnRhY3QsIFwi0KPQutCw0LbQuNGC0LUg0YLQtdC70LXRhNC+0L0g0LjQu9C4IGVtYWlsXCIpLFxuICBjbGllbnRzQ291bnQ6IHpcbiAgICAucHJlcHJvY2VzcygodmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gXCJcIiB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSA/IG51bSA6IHZhbHVlO1xuICAgIH0sIHoubnVtYmVyKCkuaW50KCkubWluKDEsIFwi0JzQuNC90LjQvNGD0LwgMVwiKS5tYXgoMTAwMCwgXCLQodC70LjRiNC60L7QvCDQvNC90L7Qs9C+XCIpLm9wdGlvbmFsKCkpLFxuICBtZXNzYWdlOiB6LnN0cmluZygpLm1heCgxMDAwLCBcItCh0L7QvtCx0YnQtdC90LjQtSDRgdC70LjRiNC60L7QvCDQtNC70LjQvdC90L7QtVwiKS5vcHRpb25hbCgpLFxuICBhZ3JlZTogei5ib29sZWFuKCkucmVmaW5lKCh2YWx1ZSkgPT4gdmFsdWUgPT09IHRydWUsIHtcbiAgICBtZXNzYWdlOiBcItCd0YPQttC90L4g0YHQvtCz0LvQsNGB0LjQtVwiXG4gIH0pLFxuICBjb21wYW55OiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuXG5leHBvcnQgdHlwZSBMZWFkSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBsZWFkU2NoZW1hPjsiXSwibmFtZXMiOlsieiIsInRlbGVncmFtUmVnZXgiLCJpc1ZhbGlkQ29udGFjdCIsInZhbHVlIiwiZW1haWxMaWtlIiwiaW5jbHVkZXMiLCJwaG9uZURpZ2l0cyIsInJlcGxhY2UiLCJsZW5ndGgiLCJsZWFkU2NoZW1hIiwib2JqZWN0IiwibmFtZSIsInN0cmluZyIsIm1pbiIsIm1heCIsInRlbGVncmFtIiwicmVnZXgiLCJjb250YWN0IiwicmVmaW5lIiwiY2xpZW50c0NvdW50IiwicHJlcHJvY2VzcyIsInVuZGVmaW5lZCIsIm51bSIsIk51bWJlciIsImlzRmluaXRlIiwibnVtYmVyIiwiaW50Iiwib3B0aW9uYWwiLCJtZXNzYWdlIiwiYWdyZWUiLCJib29sZWFuIiwiY29tcGFueSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/lead-schema.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxNQUFNQyxrQkFBa0JDO0FBRWpCLE1BQU1DLFNBQ1hGLGdCQUFnQkUsTUFBTSxJQUN0QixJQUFJSCx3REFBWUEsQ0FBQztJQUNmSSxLQUFLQyxLQUFzQyxHQUFHO1FBQUM7UUFBUztLQUFPLEdBQUcsQ0FBUztBQUM3RSxHQUFHO0FBRUwsSUFBSUEsSUFBcUMsRUFBRTtJQUN6Q0osZ0JBQWdCRSxNQUFNLEdBQUdBO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVsc2Utc2l0ZS8uL2xpYi9wcmlzbWEudHM/OTgyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHsgcHJpc21hPzogUHJpc21hQ2xpZW50IH07XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hIHx8XG4gIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IFtcImVycm9yXCIsIFwid2FyblwiXSA6IFtcImVycm9yXCJdXG4gIH0pO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XG59Il0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./lib/rate-limit.ts":
/*!***************************!*\
  !*** ./lib/rate-limit.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n\nconst memoryStore = new Map();\nasync function rateLimit(ip, limit = 5, windowSeconds = 600) {\n    if (!ip) {\n        return {\n            success: true,\n            remaining: limit,\n            reset: Date.now() + windowSeconds * 1000\n        };\n    }\n    const useKv = Boolean(process.env.KV_REST_API_URL && process.env.KV_REST_API_TOKEN);\n    if (useKv) {\n        const key = `rate:lead:${ip}`;\n        const count = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.incr(key);\n        if (count === 1) {\n            await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.expire(key, windowSeconds);\n        }\n        return {\n            success: count <= limit,\n            remaining: Math.max(0, limit - count),\n            reset: Date.now() + windowSeconds * 1000\n        };\n    }\n    const now = Date.now();\n    const record = memoryStore.get(ip);\n    if (!record || now > record.reset) {\n        memoryStore.set(ip, {\n            count: 1,\n            reset: now + windowSeconds * 1000\n        });\n        return {\n            success: true,\n            remaining: limit - 1,\n            reset: now + windowSeconds * 1000\n        };\n    }\n    if (record.count >= limit) {\n        return {\n            success: false,\n            remaining: 0,\n            reset: record.reset\n        };\n    }\n    record.count += 1;\n    memoryStore.set(ip, record);\n    return {\n        success: true,\n        remaining: limit - record.count,\n        reset: record.reset\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmF0ZS1saW1pdC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnQztBQVFoQyxNQUFNQyxjQUFjLElBQUlDO0FBRWpCLGVBQWVDLFVBQ3BCQyxFQUFVLEVBQ1ZDLFFBQVEsQ0FBQyxFQUNUQyxnQkFBZ0IsR0FBRztJQUVuQixJQUFJLENBQUNGLElBQUk7UUFDUCxPQUFPO1lBQUVHLFNBQVM7WUFBTUMsV0FBV0g7WUFBT0ksT0FBT0MsS0FBS0MsR0FBRyxLQUFLTCxnQkFBZ0I7UUFBSztJQUNyRjtJQUVBLE1BQU1NLFFBQVFDLFFBQ1pDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFJRixRQUFRQyxHQUFHLENBQUNFLGlCQUFpQjtJQUc5RCxJQUFJTCxPQUFPO1FBQ1QsTUFBTU0sTUFBTSxDQUFDLFVBQVUsRUFBRWQsR0FBRyxDQUFDO1FBQzdCLE1BQU1lLFFBQVEsTUFBTW5CLDBDQUFFQSxDQUFDb0IsSUFBSSxDQUFDRjtRQUM1QixJQUFJQyxVQUFVLEdBQUc7WUFDZixNQUFNbkIsMENBQUVBLENBQUNxQixNQUFNLENBQUNILEtBQUtaO1FBQ3ZCO1FBRUEsT0FBTztZQUNMQyxTQUFTWSxTQUFTZDtZQUNsQkcsV0FBV2MsS0FBS0MsR0FBRyxDQUFDLEdBQUdsQixRQUFRYztZQUMvQlYsT0FBT0MsS0FBS0MsR0FBRyxLQUFLTCxnQkFBZ0I7UUFDdEM7SUFDRjtJQUVBLE1BQU1LLE1BQU1ELEtBQUtDLEdBQUc7SUFDcEIsTUFBTWEsU0FBU3ZCLFlBQVl3QixHQUFHLENBQUNyQjtJQUUvQixJQUFJLENBQUNvQixVQUFVYixNQUFNYSxPQUFPZixLQUFLLEVBQUU7UUFDakNSLFlBQVl5QixHQUFHLENBQUN0QixJQUFJO1lBQUVlLE9BQU87WUFBR1YsT0FBT0UsTUFBTUwsZ0JBQWdCO1FBQUs7UUFDbEUsT0FBTztZQUFFQyxTQUFTO1lBQU1DLFdBQVdILFFBQVE7WUFBR0ksT0FBT0UsTUFBTUwsZ0JBQWdCO1FBQUs7SUFDbEY7SUFFQSxJQUFJa0IsT0FBT0wsS0FBSyxJQUFJZCxPQUFPO1FBQ3pCLE9BQU87WUFBRUUsU0FBUztZQUFPQyxXQUFXO1lBQUdDLE9BQU9lLE9BQU9mLEtBQUs7UUFBQztJQUM3RDtJQUVBZSxPQUFPTCxLQUFLLElBQUk7SUFDaEJsQixZQUFZeUIsR0FBRyxDQUFDdEIsSUFBSW9CO0lBRXBCLE9BQU87UUFBRWpCLFNBQVM7UUFBTUMsV0FBV0gsUUFBUW1CLE9BQU9MLEtBQUs7UUFBRVYsT0FBT2UsT0FBT2YsS0FBSztJQUFDO0FBQy9FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVsc2Utc2l0ZS8uL2xpYi9yYXRlLWxpbWl0LnRzPzIyYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsga3YgfSBmcm9tIFwiQHZlcmNlbC9rdlwiO1xuXG50eXBlIFJhdGVMaW1pdFJlc3VsdCA9IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgcmVtYWluaW5nOiBudW1iZXI7XG4gIHJlc2V0OiBudW1iZXI7XG59O1xuXG5jb25zdCBtZW1vcnlTdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGNvdW50OiBudW1iZXI7IHJlc2V0OiBudW1iZXIgfT4oKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJhdGVMaW1pdChcbiAgaXA6IHN0cmluZyxcbiAgbGltaXQgPSA1LFxuICB3aW5kb3dTZWNvbmRzID0gNjAwXG4pOiBQcm9taXNlPFJhdGVMaW1pdFJlc3VsdD4ge1xuICBpZiAoIWlwKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVtYWluaW5nOiBsaW1pdCwgcmVzZXQ6IERhdGUubm93KCkgKyB3aW5kb3dTZWNvbmRzICogMTAwMCB9O1xuICB9XG5cbiAgY29uc3QgdXNlS3YgPSBCb29sZWFuKFxuICAgIHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCAmJiBwcm9jZXNzLmVudi5LVl9SRVNUX0FQSV9UT0tFTlxuICApO1xuXG4gIGlmICh1c2VLdikge1xuICAgIGNvbnN0IGtleSA9IGByYXRlOmxlYWQ6JHtpcH1gO1xuICAgIGNvbnN0IGNvdW50ID0gYXdhaXQga3YuaW5jcihrZXkpO1xuICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgYXdhaXQga3YuZXhwaXJlKGtleSwgd2luZG93U2Vjb25kcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGNvdW50IDw9IGxpbWl0LFxuICAgICAgcmVtYWluaW5nOiBNYXRoLm1heCgwLCBsaW1pdCAtIGNvdW50KSxcbiAgICAgIHJlc2V0OiBEYXRlLm5vdygpICsgd2luZG93U2Vjb25kcyAqIDEwMDBcbiAgICB9O1xuICB9XG5cbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgcmVjb3JkID0gbWVtb3J5U3RvcmUuZ2V0KGlwKTtcblxuICBpZiAoIXJlY29yZCB8fCBub3cgPiByZWNvcmQucmVzZXQpIHtcbiAgICBtZW1vcnlTdG9yZS5zZXQoaXAsIHsgY291bnQ6IDEsIHJlc2V0OiBub3cgKyB3aW5kb3dTZWNvbmRzICogMTAwMCB9KTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZW1haW5pbmc6IGxpbWl0IC0gMSwgcmVzZXQ6IG5vdyArIHdpbmRvd1NlY29uZHMgKiAxMDAwIH07XG4gIH1cblxuICBpZiAocmVjb3JkLmNvdW50ID49IGxpbWl0KSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIHJlbWFpbmluZzogMCwgcmVzZXQ6IHJlY29yZC5yZXNldCB9O1xuICB9XG5cbiAgcmVjb3JkLmNvdW50ICs9IDE7XG4gIG1lbW9yeVN0b3JlLnNldChpcCwgcmVjb3JkKTtcblxuICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZW1haW5pbmc6IGxpbWl0IC0gcmVjb3JkLmNvdW50LCByZXNldDogcmVjb3JkLnJlc2V0IH07XG59Il0sIm5hbWVzIjpbImt2IiwibWVtb3J5U3RvcmUiLCJNYXAiLCJyYXRlTGltaXQiLCJpcCIsImxpbWl0Iiwid2luZG93U2Vjb25kcyIsInN1Y2Nlc3MiLCJyZW1haW5pbmciLCJyZXNldCIsIkRhdGUiLCJub3ciLCJ1c2VLdiIsIkJvb2xlYW4iLCJwcm9jZXNzIiwiZW52IiwiS1ZfUkVTVF9BUElfVVJMIiwiS1ZfUkVTVF9BUElfVE9LRU4iLCJrZXkiLCJjb3VudCIsImluY3IiLCJleHBpcmUiLCJNYXRoIiwibWF4IiwicmVjb3JkIiwiZ2V0Iiwic2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/rate-limit.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sanitize.ts":
/*!*************************!*\
  !*** ./lib/sanitize.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sanitizeText: () => (/* binding */ sanitizeText)\n/* harmony export */ });\nconst sanitizeText = (value)=>value.trim().replace(/[<>]/g, \"\").replace(/\\s+/g, \" \");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2FuaXRpemUudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGVBQWUsQ0FBQ0MsUUFDM0JBLE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDLFNBQVMsSUFBSUEsT0FBTyxDQUFDLFFBQVEsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL3B1bHNlLXNpdGUvLi9saWIvc2FuaXRpemUudHM/OWExZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2FuaXRpemVUZXh0ID0gKHZhbHVlOiBzdHJpbmcpID0+XG4gIHZhbHVlLnRyaW0oKS5yZXBsYWNlKC9bPD5dL2csIFwiXCIpLnJlcGxhY2UoL1xccysvZywgXCIgXCIpOyJdLCJuYW1lcyI6WyJzYW5pdGl6ZVRleHQiLCJ2YWx1ZSIsInRyaW0iLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/sanitize.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/crypto-js","vendor-chunks/@upstash","vendor-chunks/@vercel"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flead%2Froute&page=%2Fapi%2Flead%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flead%2Froute.ts&appDir=E%3A%5CPulse%5Cpulse-site%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=E%3A%5CPulse%5Cpulse-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();